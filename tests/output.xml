<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.1 (Python 3.12.5 on win32)" generated="2024-12-04T14:28:27.998552" rpa="false" schemaversion="5">
<suite id="s1" name="bgAPITest" source="C:\Suraj\new_f\RobotAutomation\tests\bgAPITest.robot">
<test id="s1-t1" name="Verify that the agent is able to get the required information and upload logs to Kinesis" line="11">
<kw name="Create API session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.813156" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:28.813156" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Get API headers" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.813156" level="INFO">${headers_data} = {'qac1': {'X-Bitglass-Machine-GUID': '08D5720C-7FBE-40F4-AE6C-2644A5F6A03B', 'cid': '0_Ce7G3tM6v0P2DOJVNqqg6pbk7AC_1mmg8A==', 'Content-Type': 'application/json'}, 'dev4': {'X-Bitglass-Machine-GUID': '...</msg>
<var>${headers_data}</var>
<arg>${api_headers}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.813156" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${headers_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers} is None</arg>
<arg>Fail</arg>
<arg>No headers defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<return>
<value>${headers}</value>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:28.813156" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.813156" level="INFO">${url} = https://portal.dev4.fp1.dev</msg>
<var>${url}</var>
<arg>${env_data}</arg>
<arg>url</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:28.813156" level="INFO">Creating Session using : alias=mysession, url=https://portal.dev4.fp1.dev, headers={'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'},                     cookies={}, auth=None, timeout=None, proxies=None, verify=True,                     debug=0 </msg>
<arg>${alias}</arg>
<arg>${url}</arg>
<arg>headers=${headers}</arg>
<arg>verify=True</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request to the Kinesis Shard Key API to get PartitionKey and StreamName" owner="keywords">
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.818103" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:28.818103" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Get API payload" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.818103" level="INFO">${payload_data} = {'qac1': {'company_id': 314663}, 'dev4': {'company_id': 315420}}</msg>
<var>${payload_data}</var>
<arg>${api_payloads}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:28.818103" level="INFO">${payload} = {'company_id': 315420}</msg>
<var>${payload}</var>
<arg>${payload_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload} is None</arg>
<arg>Fail</arg>
<arg>No payload defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<return>
<value>${payload}</value>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</return>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:28:28.818103" level="INFO">${final_payload} = {'company_id': 315420}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:29.629702" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 path_url=/api/kinesis_shard_key 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '22'} 
 body=b'{"company_id": 315420}' 
 </msg>
<msg time="2024-12-04T14:28:29.629702" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '99', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"PartitionKey":"OJcjAHmoGHlWVMlISvnugbgYg23d64XC","StreamName":"sase-raw-logs-dev4","status":200}
 
 </msg>
<msg time="2024-12-04T14:28:29.629702" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:28:28.818103" elapsed="0.811599"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.629702" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.629702" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.816546"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${KINESIS_SHARD_KEY_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.629702" elapsed="0.008370"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.638072" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Verify PartitionKey from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${response_json} = {'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${response_dictionary} = {'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${partitionKey} = OJcjAHmoGHlWVMlISvnugbgYg23d64XC</msg>
<var>${partitionKey}</var>
<arg>${response_dictionary}</arg>
<arg>PartitionKey</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.638072" level="INFO">Length is 32.</msg>
<arg>${partitionKey}</arg>
<arg>PartitionKey is missing or empty</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${partitionKey}</arg>
<arg>^[A-Za-z0-9]{32}$</arg>
<arg>PartitionKey is not alphanumeric or does not have a length of 32</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${PARTITION_KEY} = OJcjAHmoGHlWVMlISvnugbgYg23d64XC</msg>
<arg>${PARTITION_KEY}</arg>
<arg>${partitionkey}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Verify StreamName from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${response_json} = {'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${response_dictionary} = {'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.638072" level="INFO">${streamName} = sase-raw-logs-dev4</msg>
<var>${streamName}</var>
<arg>${response_dictionary}</arg>
<arg>StreamName</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Should Be String" owner="String">
<arg>${streamName}</arg>
<arg>StreamName is not a string</arg>
<doc>Fails if the given ``item`` is not a string.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Should Start With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>sase-raw-logs-</arg>
<arg>StreamName does not start with 'sase-raw-logs-'</arg>
<doc>Fails if the string ``str1`` does not start with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.000000"/>
</kw>
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:29.646231" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${environmentSuffix} = dev4</msg>
<var>${environmentSuffix}</var>
<arg>${env_data}</arg>
<arg>environmentSuffix</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Should End With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>${environmentSuffix}</arg>
<arg>StreamName does not end with environment suffix ${environmentSuffix}</arg>
<doc>Fails if the string ``str1`` does not end with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${STREAM_NAME} = sase-raw-logs-dev4</msg>
<arg>${STREAM_NAME}</arg>
<arg>${streamName}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:29.638072" elapsed="0.008159"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<arg>${RESPONSE}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="0.833075"/>
</kw>
<kw name="Send a Post request to the Signed Kinesis Post API to get the signed headers" owner="keywords">
<kw name="Create base64 encoded data for the log upload payload" owner="keywords">
<kw name="Generate Random String" owner="String">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${random_number} = 5674155422762991</msg>
<var>${random_number}</var>
<arg>16</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${plain_text} = This is test number: 5674155422762991</msg>
<var>${plain_text}</var>
<arg>This is test number: ${random_number}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${encoded_text} = VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==</msg>
<var>${encoded_text}</var>
<arg>base64.b64encode("${plain_text}".encode("utf-8")).decode("utf-8")</arg>
<arg>modules=base64</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${DATA} = VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==</msg>
<arg>${DATA}</arg>
<arg>${encoded_text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Create log upload payload using the required parameters" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${payload} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==', 'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<var>${payload}</var>
<arg>{"Records": [{"Data": "${Data}", "PartitionKey": "${PartitionKey}"}], "StreamName": "${StreamName}"}</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${LOG_UPLOAD_PAYLOAD} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==', 'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>${payload}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">{'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==', 'PartitionKey': 'OJcjAHmoGHlWVMlISvnugbgYg23d64XC'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<arg>${PARTITION_KEY}</arg>
<arg>${STREAM_NAME}</arg>
<arg>${DATA}</arg>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Generate SHA-256 Hash from the payload" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${sha256_hash} = {"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==", "PartitionKey": "OJcjAHmoGHlWVMlISvnugbgYg23d64XC"}], "StreamName": "sase-raw-logs-dev4"}</msg>
<var>${sha256_hash}</var>
<arg>json.dumps(${payload})</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Convert Json To String" owner="JSONLibrary">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${sha256_hash} = "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==\", \"PartitionKey\": \"OJcjAHmoGHlWVMlISvnugbgYg23d64XC\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert JSON object to string</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">Converted Hash: "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==\", \"PartitionKey\": \"OJcjAHmoGHlWVMlISvnugbgYg23d64XC\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<arg>Converted Hash: ${sha256_hash}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${sha256_hash} = a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53</msg>
<var>${sha256_hash}</var>
<arg>hashlib.sha256(${sha256_hash}.encode('utf-8')).hexdigest()</arg>
<arg>modules=hashlib</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${sha256_hash} = {"payload_hash": "a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53"}</msg>
<var>${sha256_hash}</var>
<arg>{"payload_hash": "${sha256_hash}"}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${sha256_hash} = {'payload_hash': 'a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53'}</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${PAYLOAD_HASH} = {'payload_hash': 'a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<arg>${sha256_hash}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">{'payload_hash': 'a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${LOG_UPLOAD_PAYLOAD_HASH} = {'payload_hash': 'a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD_HASH}</arg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.646231" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:29.646231" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Set Variable" owner="BuiltIn">
<arg>${payload}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:28:29.646231" level="INFO">${final_payload} = {'payload_hash': 'a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53'}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:29.920716" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 path_url=/api/signed_kinesis_post 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '84'} 
 body=b'{"payload_hash": "a24dd21b394e462bf02e7c192a13742519627bd30f8732b39831da81928acf53"}' 
 </msg>
<msg time="2024-12-04T14:28:29.923564" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '1791', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb8379d0cd59b758553ea5661558ec9e79647c6d389df196e7afda","Content-Type":"application/x-amz-json-1.1","X-Amz-Date":"20241204T085832Z","X-Amz-Security-Token":"IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==","X-Amz-Target":"Kinesis_20131202.PutRecords"},"host":"https://kinesis.us-west-2.amazonaws.com","status":200}
 
 </msg>
<msg time="2024-12-04T14:28:29.923564" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.277333"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.923564" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.923564" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.277333"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.925631" level="INFO">${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE} = {"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb83...</msg>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<arg>${RESPONSE.text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.923564" elapsed="0.002067"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.925631" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:28:29.925631" elapsed="0.000000"/>
</kw>
<arg>${RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:28:29.925631" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:28:29.646231" elapsed="0.279400"/>
</kw>
<kw name="Send a Post request to the Kinesis Log Upload API to verify the log upload" owner="keywords">
<kw name="Extract signed headers" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:29.927887" level="INFO">${response_json} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb...</msg>
<var>${response_json}</var>
<arg>${response}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.927887" level="INFO">${response_dictionary} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb...</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:29.927887" level="INFO">${signed_ headers} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb8379d0cd59b7...</msg>
<var>${signed_ headers}</var>
<arg>${response_dictionary}</arg>
<arg>headers</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.927887" level="INFO">${LOG_UPLOAD_SIGNED_HEADERS} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb8379d0cd59b7...</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${signed_headers}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:29.927887" level="INFO">{'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb8379d0cd59b758553ea5661558ec9e79647c6d389df196e7afda', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085832Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords'}</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request" owner="keywords">
<kw name="POST" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:31.467000" level="INFO">POST Request : url=https://kinesis.us-west-2.amazonaws.com/ 
 path_url=/ 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=527866819fcb8379d0cd59b758553ea5661558ec9e79647c6d389df196e7afda', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085832Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords', 'Content-Length': '167'} 
 body=b'{"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogNTY3NDE1NTQyMjc2Mjk5MQ==", "PartitionKey": "OJcjAHmoGHlWVMlISvnugbgYg23d64XC"}], "StreamName": "sase-raw-logs-dev4"}' 
 </msg>
<msg time="2024-12-04T14:28:31.467000" level="INFO">POST Response : url=https://kinesis.us-west-2.amazonaws.com/ 
 status=200, reason=OK 
 headers={'x-amzn-RequestId': 'fa286b1d-7fe5-bc62-a5e2-70e4de4a0d0b', 'x-amz-id-2': '1weuoFEoKiAQdSoh0fc9oKzrVuKxAE2/4MJ4Q3MtXTVlewa7/86SLEQFF1pVcqiQQ1hKZNFltS5Z2GacpKmTRO+AbSUbToNhF2kDuUGovy4=', 'Date': 'Wed, 04 Dec 2024 08:58:33 GMT', 'Content-Type': 'application/x-amz-json-1.1', 'Content-Length': '146', 'connection': 'keep-alive'} 
 body={"FailedRecordCount":0,"Records":[{"SequenceNumber":"49656202370868236242293867407178837405486297980315107330","ShardId":"shardId-000000000000"}]} 
 </msg>
<msg time="2024-12-04T14:28:31.467000" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${host}</arg>
<arg>headers=${headers}</arg>
<arg>json=${payload}</arg>
<doc>Sends a POST request.</doc>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="1.539113"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.467000" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:31.467000" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="1.539113"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.467000" level="INFO">${KINESIS_LOG_UPLOAD_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:31.467000" elapsed="0.006983"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.474364" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:28:31.473983" elapsed="0.000381"/>
</kw>
<kw name="Verify log upload to kinesis response" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:31.474364" level="INFO">${response_json} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867407178837405486297980315107330', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:31.474364" level="INFO">${response_dictionary} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867407178837405486297980315107330', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>FailedRecordCount</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Numbers" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.474364" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response_dictionary['FailedRecordCount']}</arg>
<arg>0</arg>
<arg>"'FailedRecordCount' should be 0"</arg>
<doc>Fails if objects are unequal after converting them to real numbers.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>Records</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Get From List" owner="Collections">
<msg time="2024-12-04T14:28:31.474364" level="INFO">${record} = {'SequenceNumber': '49656202370868236242293867407178837405486297980315107330', 'ShardId': 'shardId-000000000000'}</msg>
<var>${record}</var>
<arg>${response_dictionary['Records']}</arg>
<arg>0</arg>
<doc>Returns the value specified with an ``index`` from ``list``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>SequenceNumber</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.474364" level="INFO">${sequence_number} = 49656202370868236242293867407178837405486297980315107330</msg>
<var>${sequence_number}</var>
<arg>${record['SequenceNumber']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${sequence_number}</arg>
<arg>^\\d{56}$</arg>
<arg>"SequenceNumber should be a 56-digit number"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.482310" level="INFO">${SEQUENCE_NUMBER} = 49656202370868236242293867407178837405486297980315107330</msg>
<arg>${SEQUENCE_NUMBER}</arg>
<arg>${sequence_number}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.007946"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>ShardId</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.482310" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.482310" level="INFO">${shard_id} = shardId-000000000000</msg>
<var>${shard_id}</var>
<arg>${record['ShardId']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:31.482310" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${shard_id}</arg>
<arg>^shardId-\\d{12}$</arg>
<arg>"ShardId should match format 'shardId-&lt;12 digits&gt;'"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:28:31.482310" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:31.482310" level="INFO">${SHARD_ID} = shardId-000000000000</msg>
<arg>${SHARD_ID}</arg>
<arg>${shard_id}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:31.482310" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:31.474364" elapsed="0.007946"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:28:29.927887" elapsed="1.554423"/>
</kw>
<doc>This test case verifies that the shard key api returns valid partition key and stream name, signed kinesis post api returns valid signed headers and log upload api successfully uploads logs to kinesis.</doc>
<tag>API</tag>
<tag>Regression</tag>
<tag>Sanity</tag>
<status status="PASS" start="2024-12-04T14:28:28.813156" elapsed="2.669154"/>
</test>
<test id="s1-t2" name="Verify that the agent is able to get the required information and upload logs to Kinesis on a new session while control plane is down" line="19">
<kw name="Open SSH Connection" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:31.487251" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:31.487251" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:31.490632" level="INFO">${ssh_host} = dev4-bgapi1-b1-usw2a.bgcloud.dev</msg>
<var>${ssh_host}</var>
<arg>${env_data}</arg>
<arg>${host_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="0.003381"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:31.490632" level="INFO">${ssh_user} = ubuntu</msg>
<var>${ssh_user}</var>
<arg>${env_data}</arg>
<arg>${user}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.490632" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:31.490632" level="INFO">${ssh_port} = 22</msg>
<var>${ssh_port}</var>
<arg>${env_data}</arg>
<arg>${port}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.490632" elapsed="0.000000"/>
</kw>
<kw name="Open Connection" owner="SSHLibrary">
<arg>${ssh_host}</arg>
<arg>${ssh_port}</arg>
<doc>Opens a new SSH connection to the given ``host`` and ``port``.</doc>
<status status="PASS" start="2024-12-04T14:28:31.490632" elapsed="0.000000"/>
</kw>
<kw name="Login With Public Key" owner="SSHLibrary">
<msg time="2024-12-04T14:28:31.490632" level="INFO">Logging into 'dev4-bgapi1-b1-usw2a.bgcloud.dev:22' as 'ubuntu'.</msg>
<msg time="2024-12-04T14:28:36.562867" level="INFO">Read output: Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.15.0-1070-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

 System information disabled due to load higher than 2.0

 * Introducing Expanded Security Maintenance for Applications.
   Receive updates to over 25,000 software packages with your
   Ubuntu Pro subscription. Free for personal use.

     https://ubuntu.com/aws/pro
New release '22.04.5 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


No mail.
Last login: Wed Dec  4 08:56:13 2024 from 10.55.164.227
ubuntu@dev4-bgapi1-b1-usw2a:~$</msg>
<arg>${ssh_user}</arg>
<arg>${PEM}</arg>
<doc>Logs into the SSH server using key-based authentication.</doc>
<status status="PASS" start="2024-12-04T14:28:31.490632" elapsed="5.072235"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:36.562867" level="INFO">SSH connection established with dev4-bgapi1-b1-usw2a.bgcloud.dev</msg>
<arg>SSH connection established with ${ssh_host}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:36.562867" elapsed="0.000000"/>
</kw>
<arg>${ENV}</arg>
<arg>Control_Plane</arg>
<arg>Default_User</arg>
<arg>Default_Port</arg>
<arg>${PEM}</arg>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="5.075616"/>
</kw>
<kw name="Run Command" owner="keywords">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:28:36.565270" level="INFO">Executing command 'sudo /opt/bg/frontend/bin/frontend.sh offline'.</msg>
<msg time="2024-12-04T14:28:37.360817" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:28:37.360817" level="INFO">${output} = $ mv /opt/bg/deploy/run/running.txt /opt/bg/deploy/run/running.txt.offline</msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:28:36.565270" elapsed="0.795547"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:37.360817" level="INFO">command executed. Output: $ mv /opt/bg/deploy/run/running.txt /opt/bg/deploy/run/running.txt.offline</msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:37.360817" elapsed="0.000000"/>
</kw>
<arg>${CONTROL_PLANE_DOWN_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:28:36.564630" elapsed="0.796187"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2024-12-04T14:28:47.361350" level="INFO">Slept 10 seconds.</msg>
<arg>10 seconds</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2024-12-04T14:28:37.360817" elapsed="10.000533"/>
</kw>
<kw name="Create API session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.363394" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.363394" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.365161" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:47.365161" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:47.365161" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:47.363394" elapsed="0.001767"/>
</kw>
<kw name="Get API headers" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.367185" level="INFO">${headers_data} = {'qac1': {'X-Bitglass-Machine-GUID': '08D5720C-7FBE-40F4-AE6C-2644A5F6A03B', 'cid': '0_Ce7G3tM6v0P2DOJVNqqg6pbk7AC_1mmg8A==', 'Content-Type': 'application/json'}, 'dev4': {'X-Bitglass-Machine-GUID': '...</msg>
<var>${headers_data}</var>
<arg>${api_headers}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.365161" elapsed="0.002024"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.367185" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.367185" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${headers_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.367185" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers} is None</arg>
<arg>Fail</arg>
<arg>No headers defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.369208" elapsed="0.000000"/>
</kw>
<return>
<value>${headers}</value>
<status status="PASS" start="2024-12-04T14:28:47.369208" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:47.369208" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:47.365161" elapsed="0.004047"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.369208" level="INFO">${url} = https://portal.dev4.fp1.dev</msg>
<var>${url}</var>
<arg>${env_data}</arg>
<arg>url</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.369208" elapsed="0.000000"/>
</kw>
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:47.369208" level="INFO">Creating Session using : alias=mysession, url=https://portal.dev4.fp1.dev, headers={'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'},                     cookies={}, auth=None, timeout=None, proxies=None, verify=True,                     debug=0 </msg>
<arg>${alias}</arg>
<arg>${url}</arg>
<arg>headers=${headers}</arg>
<arg>verify=True</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2024-12-04T14:28:47.369208" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:28:47.361350" elapsed="0.009881"/>
</kw>
<kw name="Send a Post request to the Kinesis Shard Key API to get PartitionKey and StreamName" owner="keywords">
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.373787" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.373787" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.373787" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:47.373787" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:47.375327" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:47.373787" elapsed="0.001540"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Get API payload" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.376298" level="INFO">${payload_data} = {'qac1': {'company_id': 314663}, 'dev4': {'company_id': 315420}}</msg>
<var>${payload_data}</var>
<arg>${api_payloads}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.375327" elapsed="0.000971"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.376298" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:47.376298" level="INFO">${payload} = {'company_id': 315420}</msg>
<var>${payload}</var>
<arg>${payload_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:47.376298" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload} is None</arg>
<arg>Fail</arg>
<arg>No payload defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.376298" elapsed="0.000000"/>
</kw>
<return>
<value>${payload}</value>
<status status="PASS" start="2024-12-04T14:28:47.376298" elapsed="0.000000"/>
</return>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:47.375327" elapsed="0.000971"/>
</kw>
<msg time="2024-12-04T14:28:47.376298" level="INFO">${final_payload} = {'company_id': 315420}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:47.375327" elapsed="0.000971"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:48.301172" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 path_url=/api/kinesis_shard_key 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '22'} 
 body=b'{"company_id": 315420}' 
 </msg>
<msg time="2024-12-04T14:28:48.301172" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '99', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"PartitionKey":"rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D","StreamName":"sase-raw-logs-dev4","status":200}
 
 </msg>
<msg time="2024-12-04T14:28:48.301172" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:28:47.376298" elapsed="0.924874"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.303707" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.303707" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:28:47.373254" elapsed="0.930453"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.303707" level="INFO">${KINESIS_SHARD_KEY_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.303707" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.307752" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:28:48.305733" elapsed="0.002019"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:28:48.303707" elapsed="0.004045"/>
</kw>
<kw name="Verify PartitionKey from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${response_json} = {'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:48.307752" elapsed="0.001771"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${response_dictionary} = {'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${partitionKey} = rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D</msg>
<var>${partitionKey}</var>
<arg>${response_dictionary}</arg>
<arg>PartitionKey</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.309523" level="INFO">Length is 32.</msg>
<arg>${partitionKey}</arg>
<arg>PartitionKey is missing or empty</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${partitionKey}</arg>
<arg>^[A-Za-z0-9]{32}$</arg>
<arg>PartitionKey is not alphanumeric or does not have a length of 32</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${PARTITION_KEY} = rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D</msg>
<arg>${PARTITION_KEY}</arg>
<arg>${partitionkey}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:48.307752" elapsed="0.001771"/>
</kw>
<kw name="Verify StreamName from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${response_json} = {'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${response_dictionary} = {'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.309523" level="INFO">${streamName} = sase-raw-logs-dev4</msg>
<var>${streamName}</var>
<arg>${response_dictionary}</arg>
<arg>StreamName</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.000000"/>
</kw>
<kw name="Should Be String" owner="String">
<arg>${streamName}</arg>
<arg>StreamName is not a string</arg>
<doc>Fails if the given ``item`` is not a string.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317171" elapsed="0.000510"/>
</kw>
<kw name="Should Start With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>sase-raw-logs-</arg>
<arg>StreamName does not start with 'sase-raw-logs-'</arg>
<doc>Fails if the string ``str1`` does not start with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.317681" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:48.317681" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.317681" level="INFO">${environmentSuffix} = dev4</msg>
<var>${environmentSuffix}</var>
<arg>${env_data}</arg>
<arg>environmentSuffix</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<kw name="Should End With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>${environmentSuffix}</arg>
<arg>StreamName does not end with environment suffix ${environmentSuffix}</arg>
<doc>Fails if the string ``str1`` does not end with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.317681" level="INFO">${STREAM_NAME} = sase-raw-logs-dev4</msg>
<arg>${STREAM_NAME}</arg>
<arg>${streamName}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:48.309523" elapsed="0.008158"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<arg>${RESPONSE}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:28:47.371231" elapsed="0.946450"/>
</kw>
<kw name="Send a Post request to the Signed Kinesis Post API to get the signed headers" owner="keywords">
<kw name="Create base64 encoded data for the log upload payload" owner="keywords">
<kw name="Generate Random String" owner="String">
<msg time="2024-12-04T14:28:48.317681" level="INFO">${random_number} = 6006383335776338</msg>
<var>${random_number}</var>
<arg>16</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.324914" level="INFO">${plain_text} = This is test number: 6006383335776338</msg>
<var>${plain_text}</var>
<arg>This is test number: ${random_number}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:48.324914" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.324914" level="INFO">${encoded_text} = VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==</msg>
<var>${encoded_text}</var>
<arg>base64.b64encode("${plain_text}".encode("utf-8")).decode("utf-8")</arg>
<arg>modules=base64</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:48.324914" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.324914" level="INFO">${DATA} = VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==</msg>
<arg>${DATA}</arg>
<arg>${encoded_text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.324914" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.007233"/>
</kw>
<kw name="Create log upload payload using the required parameters" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">${payload} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==', 'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<var>${payload}</var>
<arg>{"Records": [{"Data": "${Data}", "PartitionKey": "${PartitionKey}"}], "StreamName": "${StreamName}"}</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">${LOG_UPLOAD_PAYLOAD} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==', 'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>${payload}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">{'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==', 'PartitionKey': 'rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<arg>${PARTITION_KEY}</arg>
<arg>${STREAM_NAME}</arg>
<arg>${DATA}</arg>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Generate SHA-256 Hash from the payload" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">${sha256_hash} = {"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==", "PartitionKey": "rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D"}], "StreamName": "sase-raw-logs-dev4"}</msg>
<var>${sha256_hash}</var>
<arg>json.dumps(${payload})</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Convert Json To String" owner="JSONLibrary">
<msg time="2024-12-04T14:28:48.326942" level="INFO">${sha256_hash} = "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==\", \"PartitionKey\": \"rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert JSON object to string</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">Converted Hash: "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==\", \"PartitionKey\": \"rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<arg>Converted Hash: ${sha256_hash}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">${sha256_hash} = a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682</msg>
<var>${sha256_hash}</var>
<arg>hashlib.sha256(${sha256_hash}.encode('utf-8')).hexdigest()</arg>
<arg>modules=hashlib</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.326942" level="INFO">${sha256_hash} = {"payload_hash": "a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682"}</msg>
<var>${sha256_hash}</var>
<arg>{"payload_hash": "${sha256_hash}"}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.000000"/>
</kw>
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:48.333234" level="INFO">${sha256_hash} = {'payload_hash': 'a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682'}</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.333234" level="INFO">${PAYLOAD_HASH} = {'payload_hash': 'a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<arg>${sha256_hash}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.333234" level="INFO">{'payload_hash': 'a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:28:48.326942" elapsed="0.006292"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.333234" level="INFO">${LOG_UPLOAD_PAYLOAD_HASH} = {'payload_hash': 'a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD_HASH}</arg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.333234" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:48.333234" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Set Variable" owner="BuiltIn">
<arg>${payload}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:28:48.333234" level="INFO">${final_payload} = {'payload_hash': 'a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682'}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:48.714880" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 path_url=/api/signed_kinesis_post 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '84'} 
 body=b'{"payload_hash": "a60a7cce9176175569b0b3db2bc1a8b3417a2b037d27a175268be081b15c1682"}' 
 </msg>
<msg time="2024-12-04T14:28:48.714880" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '1791', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a362ad0468e609040e29aa2a22d0806d91ad92a7b74819bb6ffca","Content-Type":"application/x-amz-json-1.1","X-Amz-Date":"20241204T085850Z","X-Amz-Security-Token":"IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==","X-Amz-Target":"Kinesis_20131202.PutRecords"},"host":"https://kinesis.us-west-2.amazonaws.com","status":200}
 
 </msg>
<msg time="2024-12-04T14:28:48.718692" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.385458"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.718692" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.718692" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<status status="PASS" start="2024-12-04T14:28:48.333234" elapsed="0.385458"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.720723" level="INFO">${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE} = {"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a36...</msg>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<arg>${RESPONSE.text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.718692" elapsed="0.002031"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.724780" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:28:48.722761" elapsed="0.002019"/>
</kw>
<arg>${RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:28:48.722761" elapsed="0.002019"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:28:48.317681" elapsed="0.407099"/>
</kw>
<kw name="Send a Post request to the Kinesis Log Upload API to verify the log upload" owner="keywords">
<kw name="Extract signed headers" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:48.726802" level="INFO">${response_json} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a...</msg>
<var>${response_json}</var>
<arg>${response}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:48.726802" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.728841" level="INFO">${response_dictionary} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a...</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:48.728841" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:48.728841" level="INFO">${signed_ headers} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a362ad0468e60...</msg>
<var>${signed_ headers}</var>
<arg>${response_dictionary}</arg>
<arg>headers</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:48.728841" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.730862" level="INFO">${LOG_UPLOAD_SIGNED_HEADERS} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a362ad0468e60...</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${signed_headers}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:48.730862" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:48.730862" level="INFO">{'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a362ad0468e609040e29aa2a22d0806d91ad92a7b74819bb6ffca', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085850Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords'}</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:48.730862" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:48.726802" elapsed="0.004060"/>
</kw>
<kw name="Send a Post request" owner="keywords">
<kw name="POST" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:50.342960" level="INFO">POST Request : url=https://kinesis.us-west-2.amazonaws.com/ 
 path_url=/ 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=eed7964f734a362ad0468e609040e29aa2a22d0806d91ad92a7b74819bb6ffca', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085850Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords', 'Content-Length': '167'} 
 body=b'{"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogNjAwNjM4MzMzNTc3NjMzOA==", "PartitionKey": "rkhu9IJoRhmitlqUYpgcVEQqjpUMTV6D"}], "StreamName": "sase-raw-logs-dev4"}' 
 </msg>
<msg time="2024-12-04T14:28:50.342960" level="INFO">POST Response : url=https://kinesis.us-west-2.amazonaws.com/ 
 status=200, reason=OK 
 headers={'x-amzn-RequestId': 'c7bc0712-b484-0733-9876-1b1e248aefe3', 'x-amz-id-2': 'ytgooJFSr8n2QbRhupkbgxgVtn6clrgz3Z9vik+qsnqU2gMGO+S/b9cVhRbMiYyYcsFgMHdAw3C2Oht4g/pHQv3tWCDlKNRx', 'Date': 'Wed, 04 Dec 2024 08:58:52 GMT', 'Content-Type': 'application/x-amz-json-1.1', 'Content-Length': '146', 'connection': 'keep-alive'} 
 body={"FailedRecordCount":0,"Records":[{"SequenceNumber":"49656202370868236242293867429534293661800021915932295170","ShardId":"shardId-000000000000"}]} 
 </msg>
<msg time="2024-12-04T14:28:50.342960" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${host}</arg>
<arg>headers=${headers}</arg>
<arg>json=${payload}</arg>
<doc>Sends a POST request.</doc>
<status status="PASS" start="2024-12-04T14:28:48.730862" elapsed="1.612098"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:28:48.730862" elapsed="1.612098"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${KINESIS_LOG_UPLOAD_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Verify log upload to kinesis response" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${response_json} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867429534293661800021915932295170', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${response_dictionary} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867429534293661800021915932295170', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>FailedRecordCount</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Numbers" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response_dictionary['FailedRecordCount']}</arg>
<arg>0</arg>
<arg>"'FailedRecordCount' should be 0"</arg>
<doc>Fails if objects are unequal after converting them to real numbers.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>Records</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Get From List" owner="Collections">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${record} = {'SequenceNumber': '49656202370868236242293867429534293661800021915932295170', 'ShardId': 'shardId-000000000000'}</msg>
<var>${record}</var>
<arg>${response_dictionary['Records']}</arg>
<arg>0</arg>
<doc>Returns the value specified with an ``index`` from ``list``.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>SequenceNumber</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${sequence_number} = 49656202370868236242293867429534293661800021915932295170</msg>
<var>${sequence_number}</var>
<arg>${record['SequenceNumber']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${sequence_number}</arg>
<arg>^\\d{56}$</arg>
<arg>"SequenceNumber should be a 56-digit number"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${SEQUENCE_NUMBER} = 49656202370868236242293867429534293661800021915932295170</msg>
<arg>${SEQUENCE_NUMBER}</arg>
<arg>${sequence_number}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>ShardId</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.342960" level="INFO">${shard_id} = shardId-000000000000</msg>
<var>${shard_id}</var>
<arg>${record['ShardId']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${shard_id}</arg>
<arg>^shardId-\\d{12}$</arg>
<arg>"ShardId should match format 'shardId-&lt;12 digits&gt;'"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.008115"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:28:50.351075" level="INFO">${SHARD_ID} = shardId-000000000000</msg>
<arg>${SHARD_ID}</arg>
<arg>${shard_id}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:28:50.351075" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:28:50.342960" elapsed="0.008115"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:28:48.724780" elapsed="1.626295"/>
</kw>
<kw name="Run Command" owner="keywords" type="TEARDOWN">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:28:50.351075" level="INFO">Executing command 'sudo /opt/bg/frontend/bin/frontend.sh online'.</msg>
<msg time="2024-12-04T14:28:51.102289" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:28:51.102814" level="INFO">${output} = $ mv /opt/bg/deploy/run/running.txt.offline /opt/bg/deploy/run/running.txt
0</msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:28:50.351075" elapsed="0.751739"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:51.102814" level="INFO">command executed. Output: $ mv /opt/bg/deploy/run/running.txt.offline /opt/bg/deploy/run/running.txt
0</msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</kw>
<arg>${CONTROL_PLANE_UP_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:28:50.351075" elapsed="0.751739"/>
</kw>
<doc>This test case verifies that while control plane is down, on a new session, the shard key api returns valid partition key and stream name, signed kinesis post api returns valid signed headers and log upload api successfully uploads logs to kinesis.</doc>
<tag>API</tag>
<tag>Regression</tag>
<tag>Sanity</tag>
<status status="PASS" start="2024-12-04T14:28:31.487251" elapsed="19.615563"/>
</test>
<test id="s1-t3" name="Verify that the agent is able to get the required information and upload logs to Kinesis on an existing session while control plane is down" line="33">
<kw name="Create API session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.102814" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:51.102814" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</kw>
<kw name="Get API headers" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.102814" level="INFO">${headers_data} = {'qac1': {'X-Bitglass-Machine-GUID': '08D5720C-7FBE-40F4-AE6C-2644A5F6A03B', 'cid': '0_Ce7G3tM6v0P2DOJVNqqg6pbk7AC_1mmg8A==', 'Content-Type': 'application/json'}, 'dev4': {'X-Bitglass-Machine-GUID': '...</msg>
<var>${headers_data}</var>
<arg>${api_headers}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.108012" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${headers_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.005198"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers} is None</arg>
<arg>Fail</arg>
<arg>No headers defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:51.108012" elapsed="0.000000"/>
</kw>
<return>
<value>${headers}</value>
<status status="PASS" start="2024-12-04T14:28:51.108012" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:51.108012" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.005198"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.108012" level="INFO">${url} = https://portal.dev4.fp1.dev</msg>
<var>${url}</var>
<arg>${env_data}</arg>
<arg>url</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.108012" elapsed="0.000000"/>
</kw>
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:28:51.108012" level="INFO">Creating Session using : alias=mysession, url=https://portal.dev4.fp1.dev, headers={'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'},                     cookies={}, auth=None, timeout=None, proxies=None, verify=True,                     debug=0 </msg>
<arg>${alias}</arg>
<arg>${url}</arg>
<arg>headers=${headers}</arg>
<arg>verify=True</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2024-12-04T14:28:51.108012" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="0.005198"/>
</kw>
<kw name="Open SSH Connection" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.109652" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.109652" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:28:51.109652" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:28:51.109652" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:28:51.109652" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:28:51.109652" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.109652" level="INFO">${ssh_host} = dev4-bgapi1-b1-usw2a.bgcloud.dev</msg>
<var>${ssh_host}</var>
<arg>${env_data}</arg>
<arg>${host_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.109652" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.111409" level="INFO">${ssh_user} = ubuntu</msg>
<var>${ssh_user}</var>
<arg>${env_data}</arg>
<arg>${user}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.111409" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:28:51.111409" level="INFO">${ssh_port} = 22</msg>
<var>${ssh_port}</var>
<arg>${env_data}</arg>
<arg>${port}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.111409" elapsed="0.000000"/>
</kw>
<kw name="Open Connection" owner="SSHLibrary">
<arg>${ssh_host}</arg>
<arg>${ssh_port}</arg>
<doc>Opens a new SSH connection to the given ``host`` and ``port``.</doc>
<status status="PASS" start="2024-12-04T14:28:51.111409" elapsed="0.000000"/>
</kw>
<kw name="Login With Public Key" owner="SSHLibrary">
<msg time="2024-12-04T14:28:51.111409" level="INFO">Logging into 'dev4-bgapi1-b1-usw2a.bgcloud.dev:22' as 'ubuntu'.</msg>
<msg time="2024-12-04T14:28:56.091910" level="INFO">Read output: Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.15.0-1070-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

 System information disabled due to load higher than 2.0

 * Introducing Expanded Security Maintenance for Applications.
   Receive updates to over 25,000 software packages with your
   Ubuntu Pro subscription. Free for personal use.

     https://ubuntu.com/aws/pro
New release '22.04.5 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


No mail.
Last login: Wed Dec  4 08:58:37 2024 from 10.55.164.227
ubuntu@dev4-bgapi1-b1-usw2a:~$</msg>
<arg>${ssh_user}</arg>
<arg>${PEM}</arg>
<doc>Logs into the SSH server using key-based authentication.</doc>
<status status="PASS" start="2024-12-04T14:28:51.111409" elapsed="4.980501"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:56.091910" level="INFO">SSH connection established with dev4-bgapi1-b1-usw2a.bgcloud.dev</msg>
<arg>SSH connection established with ${ssh_host}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:56.091910" elapsed="0.000000"/>
</kw>
<arg>${ENV}</arg>
<arg>Control_Plane</arg>
<arg>Default_User</arg>
<arg>Default_Port</arg>
<arg>${PEM}</arg>
<status status="PASS" start="2024-12-04T14:28:51.109652" elapsed="4.982258"/>
</kw>
<kw name="Run Command" owner="keywords">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:28:56.091910" level="INFO">Executing command 'sudo /opt/bg/frontend/bin/frontend.sh offline'.</msg>
<msg time="2024-12-04T14:28:56.859014" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:28:56.859014" level="INFO">${output} = $ mv /opt/bg/deploy/run/running.txt /opt/bg/deploy/run/running.txt.offline</msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:28:56.091910" elapsed="0.767104"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:28:56.859014" level="INFO">command executed. Output: $ mv /opt/bg/deploy/run/running.txt /opt/bg/deploy/run/running.txt.offline</msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:28:56.859014" elapsed="0.000000"/>
</kw>
<arg>${CONTROL_PLANE_DOWN_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:28:56.091910" elapsed="0.767104"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2024-12-04T14:29:06.859590" level="INFO">Slept 10 seconds.</msg>
<arg>10 seconds</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2024-12-04T14:28:56.859014" elapsed="10.000576"/>
</kw>
<kw name="Send a Post request to the Kinesis Shard Key API to get PartitionKey and StreamName" owner="keywords">
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:06.859590" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:06.859590" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Get API payload" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:06.859590" level="INFO">${payload_data} = {'qac1': {'company_id': 314663}, 'dev4': {'company_id': 315420}}</msg>
<var>${payload_data}</var>
<arg>${api_payloads}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:06.859590" level="INFO">${payload} = {'company_id': 315420}</msg>
<var>${payload}</var>
<arg>${payload_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload} is None</arg>
<arg>Fail</arg>
<arg>No payload defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<return>
<value>${payload}</value>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</return>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:29:06.859590" level="INFO">${final_payload} = {'company_id': 315420}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:07.838460" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 path_url=/api/kinesis_shard_key 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '22'} 
 body=b'{"company_id": 315420}' 
 </msg>
<msg time="2024-12-04T14:29:07.840365" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '99', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"PartitionKey":"HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F","StreamName":"sase-raw-logs-dev4","status":200}
 
 </msg>
<msg time="2024-12-04T14:29:07.840365" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.980775"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.840365" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.840365" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.980775"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.840365" level="INFO">${KINESIS_SHARD_KEY_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.840365" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.840365" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:07.840365" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:07.840365" elapsed="0.000000"/>
</kw>
<kw name="Verify PartitionKey from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:07.842382" level="INFO">${response_json} = {'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:07.840365" elapsed="0.002017"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.842382" level="INFO">${response_dictionary} = {'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.842382" level="INFO">${partitionKey} = HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F</msg>
<var>${partitionKey}</var>
<arg>${response_dictionary}</arg>
<arg>PartitionKey</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.842382" level="INFO">Length is 32.</msg>
<arg>${partitionKey}</arg>
<arg>PartitionKey is missing or empty</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${partitionKey}</arg>
<arg>^[A-Za-z0-9]{32}$</arg>
<arg>PartitionKey is not alphanumeric or does not have a length of 32</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.842382" level="INFO">${PARTITION_KEY} = HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F</msg>
<arg>${PARTITION_KEY}</arg>
<arg>${partitionkey}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:07.840365" elapsed="0.002017"/>
</kw>
<kw name="Verify StreamName from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:07.844401" level="INFO">${response_json} = {'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.002019"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.844401" level="INFO">${response_dictionary} = {'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:07.844401" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.844401" level="INFO">${streamName} = sase-raw-logs-dev4</msg>
<var>${streamName}</var>
<arg>${response_dictionary}</arg>
<arg>StreamName</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.844401" elapsed="0.000000"/>
</kw>
<kw name="Should Be String" owner="String">
<arg>${streamName}</arg>
<arg>StreamName is not a string</arg>
<doc>Fails if the given ``item`` is not a string.</doc>
<status status="PASS" start="2024-12-04T14:29:07.844401" elapsed="0.000000"/>
</kw>
<kw name="Should Start With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>sase-raw-logs-</arg>
<arg>StreamName does not start with 'sase-raw-logs-'</arg>
<doc>Fails if the string ``str1`` does not start with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.844401" elapsed="0.000000"/>
</kw>
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.846418" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.846418" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:07.846418" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:07.846418" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:07.846418" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:07.844401" elapsed="0.002017"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.847298" level="INFO">${environmentSuffix} = dev4</msg>
<var>${environmentSuffix}</var>
<arg>${env_data}</arg>
<arg>environmentSuffix</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.847298" elapsed="0.000000"/>
</kw>
<kw name="Should End With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>${environmentSuffix}</arg>
<arg>StreamName does not end with environment suffix ${environmentSuffix}</arg>
<doc>Fails if the string ``str1`` does not end with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.847298" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${STREAM_NAME} = sase-raw-logs-dev4</msg>
<arg>${STREAM_NAME}</arg>
<arg>${streamName}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.847298" elapsed="0.001009"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:07.842382" elapsed="0.005925"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<arg>${RESPONSE}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:06.859590" elapsed="0.988717"/>
</kw>
<kw name="Send a Post request to the Signed Kinesis Post API to get the signed headers" owner="keywords">
<kw name="Create base64 encoded data for the log upload payload" owner="keywords">
<kw name="Generate Random String" owner="String">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${random_number} = 8720618367165837</msg>
<var>${random_number}</var>
<arg>16</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${plain_text} = This is test number: 8720618367165837</msg>
<var>${plain_text}</var>
<arg>This is test number: ${random_number}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${encoded_text} = VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==</msg>
<var>${encoded_text}</var>
<arg>base64.b64encode("${plain_text}".encode("utf-8")).decode("utf-8")</arg>
<arg>modules=base64</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${DATA} = VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==</msg>
<arg>${DATA}</arg>
<arg>${encoded_text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Create log upload payload using the required parameters" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${payload} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==', 'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<var>${payload}</var>
<arg>{"Records": [{"Data": "${Data}", "PartitionKey": "${PartitionKey}"}], "StreamName": "${StreamName}"}</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${LOG_UPLOAD_PAYLOAD} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==', 'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>${payload}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">{'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==', 'PartitionKey': 'HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<arg>${PARTITION_KEY}</arg>
<arg>${STREAM_NAME}</arg>
<arg>${DATA}</arg>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Generate SHA-256 Hash from the payload" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${sha256_hash} = {"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==", "PartitionKey": "HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F"}], "StreamName": "sase-raw-logs-dev4"}</msg>
<var>${sha256_hash}</var>
<arg>json.dumps(${payload})</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Convert Json To String" owner="JSONLibrary">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${sha256_hash} = "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==\", \"PartitionKey\": \"HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert JSON object to string</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">Converted Hash: "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==\", \"PartitionKey\": \"HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<arg>Converted Hash: ${sha256_hash}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${sha256_hash} = 1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2</msg>
<var>${sha256_hash}</var>
<arg>hashlib.sha256(${sha256_hash}.encode('utf-8')).hexdigest()</arg>
<arg>modules=hashlib</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${sha256_hash} = {"payload_hash": "1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2"}</msg>
<var>${sha256_hash}</var>
<arg>{"payload_hash": "${sha256_hash}"}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${sha256_hash} = {'payload_hash': '1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2'}</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${PAYLOAD_HASH} = {'payload_hash': '1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<arg>${sha256_hash}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">{'payload_hash': '1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${LOG_UPLOAD_PAYLOAD_HASH} = {'payload_hash': '1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD_HASH}</arg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:07.848307" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:07.848307" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Set Variable" owner="BuiltIn">
<arg>${payload}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:29:07.848307" level="INFO">${final_payload} = {'payload_hash': '1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2'}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:08.142392" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 path_url=/api/signed_kinesis_post 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '84'} 
 body=b'{"payload_hash": "1e09466bd363c9533608e038f0d691016c61faa712c13408afe7e2b25feb4ba2"}' 
 </msg>
<msg time="2024-12-04T14:29:08.142392" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '1791', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85a2f18720c918718ad9a0f4a16b6c4f8d4d507a29ed5598f57716","Content-Type":"application/x-amz-json-1.1","X-Amz-Date":"20241204T085910Z","X-Amz-Security-Token":"IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==","X-Amz-Target":"Kinesis_20131202.PutRecords"},"host":"https://kinesis.us-west-2.amazonaws.com","status":200}
 
 </msg>
<msg time="2024-12-04T14:29:08.142392" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.294085"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:08.142392" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:08.142392" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.294085"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:08.142392" level="INFO">${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE} = {"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85a2...</msg>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<arg>${RESPONSE.text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:08.142392" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:08.144513" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<arg>${RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:08.142392" elapsed="0.002121"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:07.848307" elapsed="0.296206"/>
</kw>
<kw name="Send a Post request to the Kinesis Log Upload API to verify the log upload" owner="keywords">
<kw name="Extract signed headers" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:08.144513" level="INFO">${response_json} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85...</msg>
<var>${response_json}</var>
<arg>${response}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:08.144513" level="INFO">${response_dictionary} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85...</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:08.144513" level="INFO">${signed_ headers} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85a2f18720c918...</msg>
<var>${signed_ headers}</var>
<arg>${response_dictionary}</arg>
<arg>headers</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:08.144513" level="INFO">${LOG_UPLOAD_SIGNED_HEADERS} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85a2f18720c918...</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${signed_headers}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:08.144513" level="INFO">{'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85a2f18720c918718ad9a0f4a16b6c4f8d4d507a29ed5598f57716', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085910Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords'}</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request" owner="keywords">
<kw name="POST" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:09.779706" level="INFO">POST Request : url=https://kinesis.us-west-2.amazonaws.com/ 
 path_url=/ 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=2d5cf9899a85a2f18720c918718ad9a0f4a16b6c4f8d4d507a29ed5598f57716', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085910Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords', 'Content-Length': '167'} 
 body=b'{"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogODcyMDYxODM2NzE2NTgzNw==", "PartitionKey": "HrmIbr5UHj9mUvPMW3s7FiX8AYBHIP3F"}], "StreamName": "sase-raw-logs-dev4"}' 
 </msg>
<msg time="2024-12-04T14:29:09.779706" level="INFO">POST Response : url=https://kinesis.us-west-2.amazonaws.com/ 
 status=200, reason=OK 
 headers={'x-amzn-RequestId': 'd14033c4-7905-ae2f-8e8a-2fdb4c2e465f', 'x-amz-id-2': '5tF/HzWdSL7t0JsefBeTo8/2Vur/j0V8NaLrAFKcPzYDrBXFMcCcFPtslhrVX/JSOqX4g3x3yFFRq5gUU7i246TMzN72MmFMOdHhRN51IVI=', 'Date': 'Wed, 04 Dec 2024 08:59:11 GMT', 'Content-Type': 'application/x-amz-json-1.1', 'Content-Length': '146', 'connection': 'keep-alive'} 
 body={"FailedRecordCount":0,"Records":[{"SequenceNumber":"49656202370868236242293867453312655607800164458898128898","ShardId":"shardId-000000000000"}]} 
 </msg>
<msg time="2024-12-04T14:29:09.779706" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${host}</arg>
<arg>headers=${headers}</arg>
<arg>json=${payload}</arg>
<doc>Sends a POST request.</doc>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="1.635193"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.779706" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:09.779706" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="1.635193"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.779706" level="INFO">${KINESIS_LOG_UPLOAD_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:09.779706" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.786882" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:09.786882" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:09.786882" elapsed="0.000000"/>
</kw>
<kw name="Verify log upload to kinesis response" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:09.787893" level="INFO">${response_json} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867453312655607800164458898128898', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:09.787893" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:09.787893" level="INFO">${response_dictionary} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867453312655607800164458898128898', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:09.787893" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>FailedRecordCount</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:09.787893" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Numbers" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.789910" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response_dictionary['FailedRecordCount']}</arg>
<arg>0</arg>
<arg>"'FailedRecordCount' should be 0"</arg>
<doc>Fails if objects are unequal after converting them to real numbers.</doc>
<status status="PASS" start="2024-12-04T14:29:09.787893" elapsed="0.002017"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>Records</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Get From List" owner="Collections">
<msg time="2024-12-04T14:29:09.789910" level="INFO">${record} = {'SequenceNumber': '49656202370868236242293867453312655607800164458898128898', 'ShardId': 'shardId-000000000000'}</msg>
<var>${record}</var>
<arg>${response_dictionary['Records']}</arg>
<arg>0</arg>
<doc>Returns the value specified with an ``index`` from ``list``.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>SequenceNumber</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.789910" level="INFO">${sequence_number} = 49656202370868236242293867453312655607800164458898128898</msg>
<var>${sequence_number}</var>
<arg>${record['SequenceNumber']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${sequence_number}</arg>
<arg>^\\d{56}$</arg>
<arg>"SequenceNumber should be a 56-digit number"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.789910" level="INFO">${SEQUENCE_NUMBER} = 49656202370868236242293867453312655607800164458898128898</msg>
<arg>${SEQUENCE_NUMBER}</arg>
<arg>${sequence_number}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>ShardId</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.791926" level="INFO">${shard_id} = shardId-000000000000</msg>
<var>${shard_id}</var>
<arg>${record['ShardId']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:09.789910" elapsed="0.002016"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${shard_id}</arg>
<arg>^shardId-\\d{12}$</arg>
<arg>"ShardId should match format 'shardId-&lt;12 digits&gt;'"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:09.791926" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:09.791926" level="INFO">${SHARD_ID} = shardId-000000000000</msg>
<arg>${SHARD_ID}</arg>
<arg>${shard_id}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:09.791926" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:09.787893" elapsed="0.004033"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:08.144513" elapsed="1.647413"/>
</kw>
<kw name="Run Command" owner="keywords" type="TEARDOWN">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:29:09.791926" level="INFO">Executing command 'sudo /opt/bg/frontend/bin/frontend.sh online'.</msg>
<msg time="2024-12-04T14:29:10.581173" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:29:10.581173" level="INFO">${output} = $ mv /opt/bg/deploy/run/running.txt.offline /opt/bg/deploy/run/running.txt
0</msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:29:09.791926" elapsed="0.789247"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:10.581173" level="INFO">command executed. Output: $ mv /opt/bg/deploy/run/running.txt.offline /opt/bg/deploy/run/running.txt
0</msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:10.581173" elapsed="0.000000"/>
</kw>
<arg>${CONTROL_PLANE_UP_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:29:09.791926" elapsed="0.789247"/>
</kw>
<doc>This test case verifies that while control plane is down, on an existing session, the shard key api returns valid partition key and stream name, signed kinesis post api returns valid signed headers and log upload api successfully uploads logs to kinesis.</doc>
<tag>API</tag>
<tag>Regression</tag>
<tag>Sanity</tag>
<status status="PASS" start="2024-12-04T14:28:51.102814" elapsed="19.478359"/>
</test>
<test id="s1-t4" name="Verify that the agent is able to get the required information and upload logs to Kinesis when there is a network latency" line="47">
<kw name="Create API session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:10.583938" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Get API headers" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${headers_data} = {'qac1': {'X-Bitglass-Machine-GUID': '08D5720C-7FBE-40F4-AE6C-2644A5F6A03B', 'cid': '0_Ce7G3tM6v0P2DOJVNqqg6pbk7AC_1mmg8A==', 'Content-Type': 'application/json'}, 'dev4': {'X-Bitglass-Machine-GUID': '...</msg>
<var>${headers_data}</var>
<arg>${api_headers}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${headers_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers} is None</arg>
<arg>Fail</arg>
<arg>No headers defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<return>
<value>${headers}</value>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:10.583938" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${url} = https://portal.dev4.fp1.dev</msg>
<var>${url}</var>
<arg>${env_data}</arg>
<arg>url</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:10.583938" level="INFO">Creating Session using : alias=mysession, url=https://portal.dev4.fp1.dev, headers={'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'},                     cookies={}, auth=None, timeout=None, proxies=None, verify=True,                     debug=0 </msg>
<arg>${alias}</arg>
<arg>${url}</arg>
<arg>headers=${headers}</arg>
<arg>verify=True</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:29:10.583449" elapsed="0.000489"/>
</kw>
<kw name="Open SSH Connection" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:10.583938" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${ssh_host} = dev4-sase3-b1-usw2c.bgcloud.dev</msg>
<var>${ssh_host}</var>
<arg>${env_data}</arg>
<arg>${host_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${ssh_user} = ubuntu</msg>
<var>${ssh_user}</var>
<arg>${env_data}</arg>
<arg>${user}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:10.583938" level="INFO">${ssh_port} = 22</msg>
<var>${ssh_port}</var>
<arg>${env_data}</arg>
<arg>${port}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Open Connection" owner="SSHLibrary">
<arg>${ssh_host}</arg>
<arg>${ssh_port}</arg>
<doc>Opens a new SSH connection to the given ``host`` and ``port``.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="0.000000"/>
</kw>
<kw name="Login With Public Key" owner="SSHLibrary">
<msg time="2024-12-04T14:29:10.583938" level="INFO">Logging into 'dev4-sase3-b1-usw2c.bgcloud.dev:22' as 'ubuntu'.</msg>
<msg time="2024-12-04T14:29:14.976299" level="INFO">Read output: Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.15.0-1063-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

 System information disabled due to load higher than 4.0

 * Introducing Expanded Security Maintenance for Applications.
   Receive updates to over 25,000 software packages with your
   Ubuntu Pro subscription. Free for personal use.

     https://ubuntu.com/aws/pro
New release '22.04.5 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Dec  4 08:56:54 2024 from 10.55.164.227
ubuntu@dev4-sase3-b1-usw2c:~$</msg>
<arg>${ssh_user}</arg>
<arg>${PEM}</arg>
<doc>Logs into the SSH server using key-based authentication.</doc>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="4.392361"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:14.976299" level="INFO">SSH connection established with dev4-sase3-b1-usw2c.bgcloud.dev</msg>
<arg>SSH connection established with ${ssh_host}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:14.976299" elapsed="0.000000"/>
</kw>
<arg>${ENV}</arg>
<arg>SWG_LOGGING_HOST3</arg>
<arg>Default_User</arg>
<arg>Default_Port</arg>
<arg>${PEM}</arg>
<status status="PASS" start="2024-12-04T14:29:10.583938" elapsed="4.392361"/>
</kw>
<kw name="Run Command" owner="keywords">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:29:14.976299" level="INFO">Executing command 'sudo tc qdisc add dev ens5 root netem delay 800ms'.</msg>
<msg time="2024-12-04T14:29:16.476353" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:29:16.476353" level="INFO">${output} = </msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:29:14.976299" elapsed="1.500054"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:16.476353" level="INFO">command executed. Output: </msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:16.476353" elapsed="0.000000"/>
</kw>
<arg>${NETWORK_LATENCY_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:29:14.976299" elapsed="1.500054"/>
</kw>
<kw name="Send a Post request to the Kinesis Shard Key API to get PartitionKey and StreamName" owner="keywords">
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:16.479710" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:16.479710" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:16.479710" elapsed="0.001018"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:16.480728" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:16.480728" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:16.477937" elapsed="0.002791"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Get API payload" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:16.482752" level="INFO">${payload_data} = {'qac1': {'company_id': 314663}, 'dev4': {'company_id': 315420}}</msg>
<var>${payload_data}</var>
<arg>${api_payloads}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:16.480728" elapsed="0.002024"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:16.482752" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:16.482752" level="INFO">${payload} = {'company_id': 315420}</msg>
<var>${payload}</var>
<arg>${payload_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:16.482752" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload} is None</arg>
<arg>Fail</arg>
<arg>No payload defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:16.482752" elapsed="0.000000"/>
</kw>
<return>
<value>${payload}</value>
<status status="PASS" start="2024-12-04T14:29:16.482752" elapsed="0.000000"/>
</return>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:16.480728" elapsed="0.002024"/>
</kw>
<msg time="2024-12-04T14:29:16.482752" level="INFO">${final_payload} = {'company_id': 315420}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:16.480728" elapsed="0.004045"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:23.148468" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 path_url=/api/kinesis_shard_key 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '22'} 
 body=b'{"company_id": 315420}' 
 </msg>
<msg time="2024-12-04T14:29:23.148468" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '99', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"PartitionKey":"cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB","StreamName":"sase-raw-logs-dev4","status":200}
 
 </msg>
<msg time="2024-12-04T14:29:23.148468" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:29:16.484773" elapsed="6.663695"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.148468" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.148468" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:29:16.477937" elapsed="6.670531"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.152723" level="INFO">${KINESIS_SHARD_KEY_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.148468" elapsed="0.005837"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.158030" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:23.155148" elapsed="0.003540"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:23.154305" elapsed="0.005130"/>
</kw>
<kw name="Verify PartitionKey from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${response_json} = {'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:23.159758" elapsed="0.001835"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${response_dictionary} = {'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${partitionKey} = cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB</msg>
<var>${partitionKey}</var>
<arg>${response_dictionary}</arg>
<arg>PartitionKey</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.161593" level="INFO">Length is 32.</msg>
<arg>${partitionKey}</arg>
<arg>PartitionKey is missing or empty</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${partitionKey}</arg>
<arg>^[A-Za-z0-9]{32}$</arg>
<arg>PartitionKey is not alphanumeric or does not have a length of 32</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${PARTITION_KEY} = cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB</msg>
<arg>${PARTITION_KEY}</arg>
<arg>${partitionkey}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:23.159758" elapsed="0.001835"/>
</kw>
<kw name="Verify StreamName from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${response_json} = {'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${response_dictionary} = {'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.161593" level="INFO">${streamName} = sase-raw-logs-dev4</msg>
<var>${streamName}</var>
<arg>${response_dictionary}</arg>
<arg>StreamName</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Should Be String" owner="String">
<arg>${streamName}</arg>
<arg>StreamName is not a string</arg>
<doc>Fails if the given ``item`` is not a string.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Should Start With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>sase-raw-logs-</arg>
<arg>StreamName does not start with 'sase-raw-logs-'</arg>
<doc>Fails if the string ``str1`` does not start with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.000000"/>
</kw>
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.169045" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.007452"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:23.169045" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.007452"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.169045" level="INFO">${environmentSuffix} = dev4</msg>
<var>${environmentSuffix}</var>
<arg>${env_data}</arg>
<arg>environmentSuffix</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</kw>
<kw name="Should End With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>${environmentSuffix}</arg>
<arg>StreamName does not end with environment suffix ${environmentSuffix}</arg>
<doc>Fails if the string ``str1`` does not end with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.169045" level="INFO">${STREAM_NAME} = sase-raw-logs-dev4</msg>
<arg>${STREAM_NAME}</arg>
<arg>${streamName}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:23.161593" elapsed="0.007452"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<arg>${RESPONSE}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:16.477937" elapsed="6.691108"/>
</kw>
<kw name="Send a Post request to the Signed Kinesis Post API to get the signed headers" owner="keywords">
<kw name="Create base64 encoded data for the log upload payload" owner="keywords">
<kw name="Generate Random String" owner="String">
<msg time="2024-12-04T14:29:23.169045" level="INFO">${random_number} = 5181171929413090</msg>
<var>${random_number}</var>
<arg>16</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.169045" level="INFO">${plain_text} = This is test number: 5181171929413090</msg>
<var>${plain_text}</var>
<arg>This is test number: ${random_number}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${encoded_text} = VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==</msg>
<var>${encoded_text}</var>
<arg>base64.b64encode("${plain_text}".encode("utf-8")).decode("utf-8")</arg>
<arg>modules=base64</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.008086"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${DATA} = VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==</msg>
<arg>${DATA}</arg>
<arg>${encoded_text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="0.008086"/>
</kw>
<kw name="Create log upload payload using the required parameters" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${payload} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==', 'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<var>${payload}</var>
<arg>{"Records": [{"Data": "${Data}", "PartitionKey": "${PartitionKey}"}], "StreamName": "${StreamName}"}</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${LOG_UPLOAD_PAYLOAD} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==', 'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>${payload}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">{'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==', 'PartitionKey': 'cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<arg>${PARTITION_KEY}</arg>
<arg>${STREAM_NAME}</arg>
<arg>${DATA}</arg>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Generate SHA-256 Hash from the payload" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${sha256_hash} = {"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==", "PartitionKey": "cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB"}], "StreamName": "sase-raw-logs-dev4"}</msg>
<var>${sha256_hash}</var>
<arg>json.dumps(${payload})</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Convert Json To String" owner="JSONLibrary">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${sha256_hash} = "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==\", \"PartitionKey\": \"cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert JSON object to string</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">Converted Hash: "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==\", \"PartitionKey\": \"cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<arg>Converted Hash: ${sha256_hash}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${sha256_hash} = d06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a</msg>
<var>${sha256_hash}</var>
<arg>hashlib.sha256(${sha256_hash}.encode('utf-8')).hexdigest()</arg>
<arg>modules=hashlib</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${sha256_hash} = {"payload_hash": "d06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a"}</msg>
<var>${sha256_hash}</var>
<arg>{"payload_hash": "${sha256_hash}"}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${sha256_hash} = {'payload_hash': 'd06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a'}</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">${PAYLOAD_HASH} = {'payload_hash': 'd06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<arg>${sha256_hash}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.177131" level="INFO">{'payload_hash': 'd06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.008075"/>
</kw>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:29:23.177131" elapsed="0.008075"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:23.185696" level="INFO">${LOG_UPLOAD_PAYLOAD_HASH} = {'payload_hash': 'd06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD_HASH}</arg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:23.185696" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:23.185696" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Set Variable" owner="BuiltIn">
<arg>${payload}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:29:23.185696" level="INFO">${final_payload} = {'payload_hash': 'd06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a'}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:27.563879" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 path_url=/api/signed_kinesis_post 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '84'} 
 body=b'{"payload_hash": "d06cb430c9d6cf2165cd47eceeb0e6eebf3189f0d9d636938f8004aa83897b4a"}' 
 </msg>
<msg time="2024-12-04T14:29:27.563879" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '1791', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535d58fa6781907fae38598d6de17854c538ca184b17b6591293822","Content-Type":"application/x-amz-json-1.1","X-Amz-Date":"20241204T085928Z","X-Amz-Security-Token":"IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==","X-Amz-Target":"Kinesis_20131202.PutRecords"},"host":"https://kinesis.us-west-2.amazonaws.com","status":200}
 
 </msg>
<msg time="2024-12-04T14:29:27.563879" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="4.378183"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:27.563879" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:27.563879" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<status status="PASS" start="2024-12-04T14:29:23.185696" elapsed="4.378183"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:27.563879" level="INFO">${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE} = {"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535d5...</msg>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<arg>${RESPONSE.text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:27.563879" elapsed="0.007572"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:27.571840" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<arg>${RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:23.169045" elapsed="4.402795"/>
</kw>
<kw name="Send a Post request to the Kinesis Log Upload API to verify the log upload" owner="keywords">
<kw name="Extract signed headers" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:27.571840" level="INFO">${response_json} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535...</msg>
<var>${response_json}</var>
<arg>${response}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:27.571840" level="INFO">${response_dictionary} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535...</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:27.571840" level="INFO">${signed_ headers} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535d58fa6781907...</msg>
<var>${signed_ headers}</var>
<arg>${response_dictionary}</arg>
<arg>headers</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:27.571840" level="INFO">${LOG_UPLOAD_SIGNED_HEADERS} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535d58fa6781907...</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${signed_headers}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:27.571840" level="INFO">{'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535d58fa6781907fae38598d6de17854c538ca184b17b6591293822', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085928Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords'}</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="0.008084"/>
</kw>
<kw name="Send a Post request" owner="keywords">
<kw name="POST" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:29.090928" level="INFO">POST Request : url=https://kinesis.us-west-2.amazonaws.com/ 
 path_url=/ 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28b57d48a535d58fa6781907fae38598d6de17854c538ca184b17b6591293822', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085928Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords', 'Content-Length': '167'} 
 body=b'{"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogNTE4MTE3MTkyOTQxMzA5MA==", "PartitionKey": "cBrdoY2LKzpL9ViTWpkman6RQ30wlVHB"}], "StreamName": "sase-raw-logs-dev4"}' 
 </msg>
<msg time="2024-12-04T14:29:29.090928" level="INFO">POST Response : url=https://kinesis.us-west-2.amazonaws.com/ 
 status=200, reason=OK 
 headers={'x-amzn-RequestId': 'c396eb5d-e024-7142-9c5c-f76fbc0d1673', 'x-amz-id-2': '5NjYiuwVI/P7qjNQOAY8RVrW/n37N+8TeJk70vU1FsTbh0PU41+TzSOo57+wz4oYKMDehWBQJkP5woanRJgVBDVLCZMsGW9O', 'Date': 'Wed, 04 Dec 2024 08:59:31 GMT', 'Content-Type': 'application/x-amz-json-1.1', 'Content-Length': '146', 'connection': 'keep-alive'} 
 body={"FailedRecordCount":0,"Records":[{"SequenceNumber":"49656202370868236242293867473116069458907406275430055938","ShardId":"shardId-000000000000"}]} 
 </msg>
<msg time="2024-12-04T14:29:29.090928" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${host}</arg>
<arg>headers=${headers}</arg>
<arg>json=${payload}</arg>
<doc>Sends a POST request.</doc>
<status status="PASS" start="2024-12-04T14:29:27.579924" elapsed="1.511004"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.090928" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:29.090928" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:29:27.579924" elapsed="1.511004"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.090928" level="INFO">${KINESIS_LOG_UPLOAD_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:29.090928" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.097372" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:29.090928" elapsed="0.006444"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:29.090928" elapsed="0.006444"/>
</kw>
<kw name="Verify log upload to kinesis response" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:29.101135" level="INFO">${response_json} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867473116069458907406275430055938', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:29.099118" elapsed="0.002017"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:29.101135" level="INFO">${response_dictionary} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867473116069458907406275430055938', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:29.101135" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>FailedRecordCount</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:29.101135" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Numbers" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.101135" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response_dictionary['FailedRecordCount']}</arg>
<arg>0</arg>
<arg>"'FailedRecordCount' should be 0"</arg>
<doc>Fails if objects are unequal after converting them to real numbers.</doc>
<status status="PASS" start="2024-12-04T14:29:29.101135" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>Records</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:29.101135" elapsed="0.000000"/>
</kw>
<kw name="Get From List" owner="Collections">
<msg time="2024-12-04T14:29:29.107588" level="INFO">${record} = {'SequenceNumber': '49656202370868236242293867473116069458907406275430055938', 'ShardId': 'shardId-000000000000'}</msg>
<var>${record}</var>
<arg>${response_dictionary['Records']}</arg>
<arg>0</arg>
<doc>Returns the value specified with an ``index`` from ``list``.</doc>
<status status="PASS" start="2024-12-04T14:29:29.101135" elapsed="0.006453"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>SequenceNumber</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:29.107588" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.109614" level="INFO">${sequence_number} = 49656202370868236242293867473116069458907406275430055938</msg>
<var>${sequence_number}</var>
<arg>${record['SequenceNumber']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:29.107588" elapsed="0.002026"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${sequence_number}</arg>
<arg>^\\d{56}$</arg>
<arg>"SequenceNumber should be a 56-digit number"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:29.109614" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.109614" level="INFO">${SEQUENCE_NUMBER} = 49656202370868236242293867473116069458907406275430055938</msg>
<arg>${SEQUENCE_NUMBER}</arg>
<arg>${sequence_number}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:29.109614" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>ShardId</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:29.109614" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.111638" level="INFO">${shard_id} = shardId-000000000000</msg>
<var>${shard_id}</var>
<arg>${record['ShardId']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:29.111638" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${shard_id}</arg>
<arg>^shardId-\\d{12}$</arg>
<arg>"ShardId should match format 'shardId-&lt;12 digits&gt;'"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:29.111638" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:29.113660" level="INFO">${SHARD_ID} = shardId-000000000000</msg>
<arg>${SHARD_ID}</arg>
<arg>${shard_id}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:29.111638" elapsed="0.002022"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:29.099118" elapsed="0.014542"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:27.571840" elapsed="1.541820"/>
</kw>
<kw name="Run Command" owner="keywords" type="TEARDOWN">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:29:29.113660" level="INFO">Executing command 'sudo tc qdisc del dev ens5 root'.</msg>
<msg time="2024-12-04T14:29:30.982492" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:29:30.985160" level="INFO">${output} = </msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:29:29.113660" elapsed="1.871500"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:30.985160" level="INFO">command executed. Output: </msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:30.985160" elapsed="0.000000"/>
</kw>
<arg>${RULE_CLEANED_UP_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:29:29.113660" elapsed="1.872413"/>
</kw>
<doc>This test case verifies that when there is a network latency, the shard key api returns valid partition key and stream name, signed kinesis post api returns valid signed headers and log upload api successfully uploads logs to kinesis.</doc>
<tag>API</tag>
<tag>Regression</tag>
<tag>Sanity</tag>
<status status="PASS" start="2024-12-04T14:29:10.581173" elapsed="20.404900"/>
</test>
<test id="s1-t5" name="Verify that the agent is able to get the required information and upload logs to Kinesis when there is a packet loss" line="60">
<kw name="Create API session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.986073" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.986073" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:30.986073" elapsed="0.004029"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:30.990102" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:30.990102" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:30.986073" elapsed="0.004029"/>
</kw>
<kw name="Get API headers" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.990102" level="INFO">${headers_data} = {'qac1': {'X-Bitglass-Machine-GUID': '08D5720C-7FBE-40F4-AE6C-2644A5F6A03B', 'cid': '0_Ce7G3tM6v0P2DOJVNqqg6pbk7AC_1mmg8A==', 'Content-Type': 'application/json'}, 'dev4': {'X-Bitglass-Machine-GUID': '...</msg>
<var>${headers_data}</var>
<arg>${api_headers}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.990102" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:30.990102" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.992123" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${headers_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.990102" elapsed="0.002021"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${headers} is None</arg>
<arg>Fail</arg>
<arg>No headers defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:30.992123" elapsed="0.000000"/>
</kw>
<return>
<value>${headers}</value>
<status status="PASS" start="2024-12-04T14:29:30.992123" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:30.992123" level="INFO">${headers} = {'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'}</msg>
<var>${headers}</var>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:30.990102" elapsed="0.002021"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.992123" level="INFO">${url} = https://portal.dev4.fp1.dev</msg>
<var>${url}</var>
<arg>${env_data}</arg>
<arg>url</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.992123" elapsed="0.001519"/>
</kw>
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:30.994663" level="INFO">Creating Session using : alias=mysession, url=https://portal.dev4.fp1.dev, headers={'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json'},                     cookies={}, auth=None, timeout=None, proxies=None, verify=True,                     debug=0 </msg>
<arg>${alias}</arg>
<arg>${url}</arg>
<arg>headers=${headers}</arg>
<arg>verify=True</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2024-12-04T14:29:30.993642" elapsed="0.001021"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:29:30.986073" elapsed="0.008590"/>
</kw>
<kw name="Open SSH Connection" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.994663" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:30.994663" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.994663" level="INFO">${ssh_host} = dev4-sase3-b1-usw2c.bgcloud.dev</msg>
<var>${ssh_host}</var>
<arg>${env_data}</arg>
<arg>${host_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.994663" level="INFO">${ssh_user} = ubuntu</msg>
<var>${ssh_user}</var>
<arg>${env_data}</arg>
<arg>${user}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:30.994663" level="INFO">${ssh_port} = 22</msg>
<var>${ssh_port}</var>
<arg>${env_data}</arg>
<arg>${port}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<kw name="Open Connection" owner="SSHLibrary">
<arg>${ssh_host}</arg>
<arg>${ssh_port}</arg>
<doc>Opens a new SSH connection to the given ``host`` and ``port``.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="0.000000"/>
</kw>
<kw name="Login With Public Key" owner="SSHLibrary">
<msg time="2024-12-04T14:29:30.994663" level="INFO">Logging into 'dev4-sase3-b1-usw2c.bgcloud.dev:22' as 'ubuntu'.</msg>
<msg time="2024-12-04T14:29:35.560351" level="INFO">Read output: Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.15.0-1063-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

 System information disabled due to load higher than 4.0

 * Introducing Expanded Security Maintenance for Applications.
   Receive updates to over 25,000 software packages with your
   Ubuntu Pro subscription. Free for personal use.

     https://ubuntu.com/aws/pro
New release '22.04.5 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Last login: Wed Dec  4 08:59:15 2024 from 10.55.164.227
ubuntu@dev4-sase3-b1-usw2c:~$</msg>
<arg>${ssh_user}</arg>
<arg>${PEM}</arg>
<doc>Logs into the SSH server using key-based authentication.</doc>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="4.565688"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:35.560351" level="INFO">SSH connection established with dev4-sase3-b1-usw2c.bgcloud.dev</msg>
<arg>SSH connection established with ${ssh_host}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:35.560351" elapsed="0.000000"/>
</kw>
<arg>${ENV}</arg>
<arg>SWG_LOGGING_HOST3</arg>
<arg>Default_User</arg>
<arg>Default_Port</arg>
<arg>${PEM}</arg>
<status status="PASS" start="2024-12-04T14:29:30.994663" elapsed="4.565688"/>
</kw>
<kw name="Run Command" owner="keywords">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:29:35.560351" level="INFO">Executing command 'sudo tc qdisc add dev ens5 root netem loss 40%'.</msg>
<msg time="2024-12-04T14:29:37.741846" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:29:37.741846" level="INFO">${output} = </msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:29:35.560351" elapsed="2.181495"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:37.741846" level="INFO">command executed. Output: </msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.000000"/>
</kw>
<arg>${PACKET_LOSS_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:29:35.560351" elapsed="2.181495"/>
</kw>
<kw name="Send a Post request to the Kinesis Shard Key API to get PartitionKey and StreamName" owner="keywords">
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:37.741846" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:37.741846" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Get API payload" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:37.741846" level="INFO">${payload_data} = {'qac1': {'company_id': 314663}, 'dev4': {'company_id': 315420}}</msg>
<var>${payload_data}</var>
<arg>${api_payloads}</arg>
<arg>${api_name}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid API name: ${api_name}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:37.750339" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:37.750339" level="INFO">${payload} = {'company_id': 315420}</msg>
<var>${payload}</var>
<arg>${payload_data}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:37.750339" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${payload} is None</arg>
<arg>Fail</arg>
<arg>No payload defined for API: ${api_name} in environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:37.751807" elapsed="0.000000"/>
</kw>
<return>
<value>${payload}</value>
<status status="PASS" start="2024-12-04T14:29:37.751807" elapsed="0.000000"/>
</return>
<arg>${api_name}</arg>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.009961"/>
</kw>
<msg time="2024-12-04T14:29:37.751807" level="INFO">${final_payload} = {'company_id': 315420}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="0.009961"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:48.846221" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 path_url=/api/kinesis_shard_key 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '22'} 
 body=b'{"company_id": 315420}' 
 </msg>
<msg time="2024-12-04T14:29:48.846221" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/kinesis_shard_key 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '99', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"PartitionKey":"pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU","StreamName":"sase-raw-logs-dev4","status":200}
 
 </msg>
<msg time="2024-12-04T14:29:48.846221" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:29:37.751807" elapsed="11.094414"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.846221" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="11.104375"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.846221" level="INFO">${KINESIS_SHARD_KEY_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.846221" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Verify PartitionKey from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:48.846221" level="INFO">${response_json} = {'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.846221" level="INFO">${response_dictionary} = {'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.846221" level="INFO">${partitionKey} = pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU</msg>
<var>${partitionKey}</var>
<arg>${response_dictionary}</arg>
<arg>PartitionKey</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.846221" level="INFO">Length is 32.</msg>
<arg>${partitionKey}</arg>
<arg>PartitionKey is missing or empty</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${partitionKey}</arg>
<arg>^[A-Za-z0-9]{32}$</arg>
<arg>PartitionKey is not alphanumeric or does not have a length of 32</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.846221" level="INFO">${PARTITION_KEY} = pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU</msg>
<arg>${PARTITION_KEY}</arg>
<arg>${partitionkey}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.000000"/>
</kw>
<kw name="Verify StreamName from JSON response and extract it" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:48.854074" level="INFO">${response_json} = {'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.854074" level="INFO">${response_dictionary} = {'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU', 'StreamName': 'sase-raw-logs-dev4', 'status': 200}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.854074" level="INFO">${streamName} = sase-raw-logs-dev4</msg>
<var>${streamName}</var>
<arg>${response_dictionary}</arg>
<arg>StreamName</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Should Be String" owner="String">
<arg>${streamName}</arg>
<arg>StreamName is not a string</arg>
<doc>Fails if the given ``item`` is not a string.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Should Start With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>sase-raw-logs-</arg>
<arg>StreamName does not start with 'sase-raw-logs-'</arg>
<doc>Fails if the string ``str1`` does not start with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.854074" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:48.854074" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.854074" level="INFO">${environmentSuffix} = dev4</msg>
<var>${environmentSuffix}</var>
<arg>${env_data}</arg>
<arg>environmentSuffix</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Should End With" owner="BuiltIn">
<arg>${streamName}</arg>
<arg>${environmentSuffix}</arg>
<arg>StreamName does not end with environment suffix ${environmentSuffix}</arg>
<doc>Fails if the string ``str1`` does not end with the string ``str2``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.854074" level="INFO">${STREAM_NAME} = sase-raw-logs-dev4</msg>
<arg>${STREAM_NAME}</arg>
<arg>${streamName}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_SHARD_KEY_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:48.846221" elapsed="0.007853"/>
</kw>
<arg>mysession</arg>
<arg>kinesis_shard_key</arg>
<arg>${ENV}</arg>
<arg>${RESPONSE}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:37.741846" elapsed="11.112228"/>
</kw>
<kw name="Send a Post request to the Signed Kinesis Post API to get the signed headers" owner="keywords">
<kw name="Create base64 encoded data for the log upload payload" owner="keywords">
<kw name="Generate Random String" owner="String">
<msg time="2024-12-04T14:29:48.861319" level="INFO">${random_number} = 3856988050402282</msg>
<var>${random_number}</var>
<arg>16</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.007245"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.861319" level="INFO">${plain_text} = This is test number: 3856988050402282</msg>
<var>${plain_text}</var>
<arg>This is test number: ${random_number}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:48.861319" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">${encoded_text} = VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==</msg>
<var>${encoded_text}</var>
<arg>base64.b64encode("${plain_text}".encode("utf-8")).decode("utf-8")</arg>
<arg>modules=base64</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862342" elapsed="0.000452"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">${DATA} = VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==</msg>
<arg>${DATA}</arg>
<arg>${encoded_text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="0.008720"/>
</kw>
<kw name="Create log upload payload using the required parameters" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">${payload} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==', 'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<var>${payload}</var>
<arg>{"Records": [{"Data": "${Data}", "PartitionKey": "${PartitionKey}"}], "StreamName": "${StreamName}"}</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">${LOG_UPLOAD_PAYLOAD} = {'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==', 'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>${payload}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">{'Records': [{'Data': 'VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==', 'PartitionKey': 'pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU'}], 'StreamName': 'sase-raw-logs-dev4'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<arg>${PARTITION_KEY}</arg>
<arg>${STREAM_NAME}</arg>
<arg>${DATA}</arg>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<kw name="Generate SHA-256 Hash from the payload" owner="keywords">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">${sha256_hash} = {"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==", "PartitionKey": "pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU"}], "StreamName": "sase-raw-logs-dev4"}</msg>
<var>${sha256_hash}</var>
<arg>json.dumps(${payload})</arg>
<arg>modules=json</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<kw name="Convert Json To String" owner="JSONLibrary">
<msg time="2024-12-04T14:29:48.862794" level="INFO">${sha256_hash} = "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==\", \"PartitionKey\": \"pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert JSON object to string</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.862794" level="INFO">Converted Hash: "{\"Records\": [{\"Data\": \"VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==\", \"PartitionKey\": \"pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU\"}], \"StreamName\": \"sase-raw-logs-dev4\"}"</msg>
<arg>Converted Hash: ${sha256_hash}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.866861" level="INFO">${sha256_hash} = 25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557</msg>
<var>${sha256_hash}</var>
<arg>hashlib.sha256(${sha256_hash}.encode('utf-8')).hexdigest()</arg>
<arg>modules=hashlib</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.004067"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.866861" level="INFO">${sha256_hash} = {"payload_hash": "25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557"}</msg>
<var>${sha256_hash}</var>
<arg>{"payload_hash": "${sha256_hash}"}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="0.000000"/>
</kw>
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:48.866861" level="INFO">${sha256_hash} = {'payload_hash': '25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557'}</msg>
<var>${sha256_hash}</var>
<arg>${sha256_hash}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.866861" level="INFO">${PAYLOAD_HASH} = {'payload_hash': '25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<arg>${sha256_hash}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.866861" level="INFO">{'payload_hash': '25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557'}</msg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:29:48.862794" elapsed="0.004067"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:48.866861" level="INFO">${LOG_UPLOAD_PAYLOAD_HASH} = {'payload_hash': '25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557'}</msg>
<arg>${LOG_UPLOAD_PAYLOAD_HASH}</arg>
<arg>${PAYLOAD_HASH}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request on the session" owner="keywords">
<kw name="Get environment configuration" owner="keywords">
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:48.868881" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${environments}</arg>
<arg>${env}</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:48.868881" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<arg>${env_data} is None</arg>
<arg>Fail</arg>
<arg>Invalid environment: ${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:48.868881" elapsed="0.000000"/>
</kw>
<return>
<value>${env_data}</value>
<status status="PASS" start="2024-12-04T14:29:48.868881" elapsed="0.000000"/>
</return>
<msg time="2024-12-04T14:29:48.868881" level="INFO">${env_data} = {'url': 'https://portal.dev4.fp1.dev', 'environmentSuffix': 'dev4', 'Default_User': 'ubuntu', 'Default_Port': '22', 'Control_Plane': 'dev4-bgapi1-b1-usw2a.bgcloud.dev', 'SWG_LOGGING_HOST1': 'dev4-sase...</msg>
<var>${env_data}</var>
<arg>${env}</arg>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="0.002020"/>
</kw>
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Set Variable" owner="BuiltIn">
<arg>${payload}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:48.868881" elapsed="0.000000"/>
</kw>
<msg time="2024-12-04T14:29:48.868881" level="INFO">${final_payload} = {'payload_hash': '25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557'}</msg>
<var>${final_payload}</var>
<arg>${payload} is not None</arg>
<arg>Set Variable</arg>
<arg>${payload}</arg>
<arg>ELSE</arg>
<arg>Get API Payload</arg>
<arg>${api_name}</arg>
<arg>${env}</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-12-04T14:29:48.868881" elapsed="0.000000"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:54.423195" level="INFO">POST Request : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 path_url=/api/signed_kinesis_post 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'X-Bitglass-Machine-GUID': '8384ACD4-E326-4D6B-9650-36454B1F2ED6', 'cid': '0_TxbPtvZGUnzAkFHv27-_oVAs4Z9aI7nPVQ==', 'Content-Type': 'application/json', 'Content-Length': '84'} 
 body=b'{"payload_hash": "25887b5d8c5b2d94a5cfe7660ed4be299b8732ff047112fcb6d6ddf316814557"}' 
 </msg>
<msg time="2024-12-04T14:29:54.423195" level="INFO">POST Response : url=https://portal.dev4.fp1.dev/api/signed_kinesis_post 
 status=200, reason=OK 
 headers={'content-type': 'application/json', 'content-length': '1791', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload'} 
 body={"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e239e25afd0b088cd69660ab2720240e40578753024934c27c6f01","Content-Type":"application/x-amz-json-1.1","X-Amz-Date":"20241204T085956Z","X-Amz-Security-Token":"IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==","X-Amz-Target":"Kinesis_20131202.PutRecords"},"host":"https://kinesis.us-west-2.amazonaws.com","status":200}
 
 </msg>
<msg time="2024-12-04T14:29:54.423195" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${alias}</arg>
<arg>/api/${api_name}</arg>
<arg>json=${final_payload}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2024-12-04T14:29:48.868881" elapsed="5.554314"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:54.423195" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<status status="PASS" start="2024-12-04T14:29:48.866861" elapsed="5.556334"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:54.423195" level="INFO">${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE} = {"headers":{"Authorization":"AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e239...</msg>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<arg>${RESPONSE.text}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:54.423195" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<arg>${RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<arg>mysession</arg>
<arg>signed_kinesis_post</arg>
<arg>${ENV}</arg>
<arg>${PAYLOAD_HASH}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:48.854074" elapsed="5.569121"/>
</kw>
<kw name="Send a Post request to the Kinesis Log Upload API to verify the log upload" owner="keywords">
<kw name="Extract signed headers" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:54.423195" level="INFO">${response_json} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e2...</msg>
<var>${response_json}</var>
<arg>${response}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:54.423195" level="INFO">${response_dictionary} = {'headers': {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e2...</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:54.423195" level="INFO">${signed_ headers} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e239e25afd0b08...</msg>
<var>${signed_ headers}</var>
<arg>${response_dictionary}</arg>
<arg>headers</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:54.423195" level="INFO">${LOG_UPLOAD_SIGNED_HEADERS} = {'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e239e25afd0b08...</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${signed_headers}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:54.423195" level="INFO">{'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e239e25afd0b088cd69660ab2720240e40578753024934c27c6f01', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085956Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords'}</msg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<arg>${LOG_UPLOAD_SIGNED_KINESIS_POST_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="0.000000"/>
</kw>
<kw name="Send a Post request" owner="keywords">
<kw name="POST" owner="RequestsLibrary">
<msg time="2024-12-04T14:29:55.805242" level="INFO">POST Request : url=https://kinesis.us-west-2.amazonaws.com/ 
 path_url=/ 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': 'AWS4-HMAC-SHA256 Credential=ASIAS7I6MFNJNWTMSRBG/20241204/us-west-2/kinesis/aws4_request, SignedHeaders=content-type;host;x-amz-date;x-amz-target, Signature=28e68671c5e239e25afd0b088cd69660ab2720240e40578753024934c27c6f01', 'Content-Type': 'application/x-amz-json-1.1', 'X-Amz-Date': '20241204T085956Z', 'X-Amz-Security-Token': 'IQoJb3JpZ2luX2VjEDwaCXVzLXdlc3QtMiJGMEQCIF/DER0qEZxtTqa5ecK3IcXwuqXdptnxanHMtxwew3gbAiB2YwVgb/yZPh70CDIigqa2VJfxhV6JVo6S30aW9IzgBSrDBQjl//////////8BEAMaDDIwNDYxMTUyOTU1NCIMlykQpaffcrdNLDL2KpcFKogLuavd2QpCDixTXkpsy/Vno2TlGktZar63mv+4NlTfFzfUNLGuI9ovtIrg4Goanvd1V73im/rQEec1bbUML7wO1RAythBInQ6pz3RzzP7FyljBtQXYaVYXspoaJCyYV0ML4P87C+Jpqrbe85MM/hO8vlUtS5gBqpuJudBu+byW4+/n32N9Tz2IbxjFu2gxkfuFrYmj9Gm4tPDsLMjSLBU0Fx9xBdhsZvY0OJNzpCCwvPjoUEOydlZj4sTDkQ2MYA6a3Dtgvi0MxDot7WXNICWKdmN1591fpcRJcDwOTNM46Y3u7ggFY7cTEji5ev3KD9KSTd48UtR5C/CznDQSLtgobMEEX8LwERDoiJG6+CjKarqDalXGGR47IfvhdMBcxVsl8vQzHaW98pRUSyft9bwZ/q3TtGhUsrQwYbvB9wHuHf4TbnYwy8PdyTdyNI3Tjb4tA16DFawvBxLXW9amKEAtmUzXBH4lfgk4CVnLVyhtLD9XxF0W7PJobMN9N1myIYsLsUPt9x0ihAKk1jc9rXD0qWA+yzR1id2GTF6lK3xhGdizCH2kzBsptMhjcSdvqHJ12C1RVYhgbkBMnBkvgA55GjjkpGrTkFyFnReyiTk+2GO2siN/cKpggwuLlV4HIyQgVt8e2C4Bg48n6HOwsTLvLscPXZj81ry/RTKO4/+Hu8QQ1Qr8jz0gXnOutHSf/qm84OnZNzO4K4kCyx4pY1r5BfnMtGqjfmhgml7zQL6vUa5I2dmowd9MgPT2HS5DjGYcLUF+/Y84FlBiCTvhaZBGYGj6VNpSnpHqrdtPYgPR2Yi9wVGJQYaBvvKgPIr2PSU1c3qRN5ViPnFMMlOxByBnmIOqMTX+6PenTE7gUpQsrA67Tb8KMLeev7oGOrIBLL+GXPabUvwoznqcRc4aDq4XiInBH3ns6MZPANXbQoVEFKqAObaeK9Olbe8EZtVm8TTW7U1XqpjbGvyxUO2mPvGzW2pZi4GPLbq2gUHF2AwhVFxDzOlwwOd7Rj1d9MqOLK0hrqEpAtfViiKjTRA57Xs5Qf6ivrsp7X6954Lwy8/FkMVPQ43PLNSxtVHsU43movjZclMCpk10cp0XdAEg/yRg5BfHufNm0jpUKczUfd37tw==', 'X-Amz-Target': 'Kinesis_20131202.PutRecords', 'Content-Length': '167'} 
 body=b'{"Records": [{"Data": "VGhpcyBpcyB0ZXN0IG51bWJlcjogMzg1Njk4ODA1MDQwMjI4Mg==", "PartitionKey": "pfN2IjnQ1jMEina8qT1NqCHfYZ2FlGLU"}], "StreamName": "sase-raw-logs-dev4"}' 
 </msg>
<msg time="2024-12-04T14:29:55.805792" level="INFO">POST Response : url=https://kinesis.us-west-2.amazonaws.com/ 
 status=200, reason=OK 
 headers={'x-amzn-RequestId': 'e18e25f1-c4b0-c8fb-be44-39bccc6f86b5', 'x-amz-id-2': 'FrdiSjECnMotCzuPgCdOQRIHCMzVusHCtTvbiw5hiT2OF7sMbIiqXU20EsZjOsaprVcp29IST1Q1ak86BjRJlcFdB374fCQR', 'Date': 'Wed, 04 Dec 2024 08:59:57 GMT', 'Content-Type': 'application/x-amz-json-1.1', 'Content-Length': '146', 'connection': 'keep-alive'} 
 body={"FailedRecordCount":0,"Records":[{"SequenceNumber":"49656202370868236242293867504370428673404416184534695938","ShardId":"shardId-000000000000"}]} 
 </msg>
<msg time="2024-12-04T14:29:55.805792" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>${host}</arg>
<arg>headers=${headers}</arg>
<arg>json=${payload}</arg>
<doc>Sends a POST request.</doc>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="1.382597"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.805792" level="INFO">${RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${RESPONSE}</arg>
<arg>${response}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:55.805792" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="1.383274"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.806469" level="INFO">${KINESIS_LOG_UPLOAD_RESPONSE} = &lt;Response [200]&gt;</msg>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${RESPONSE}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:55.806469" elapsed="0.000000"/>
</kw>
<kw name="Verify the response code" owner="keywords">
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.807570" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response.status_code}</arg>
<arg>${expected_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-12-04T14:29:55.807015" elapsed="0.000555"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<arg>${status_code}</arg>
<status status="PASS" start="2024-12-04T14:29:55.806469" elapsed="0.001101"/>
</kw>
<kw name="Verify log upload to kinesis response" owner="keywords">
<kw name="Convert String To Json" owner="JSONLibrary">
<msg time="2024-12-04T14:29:55.808115" level="INFO">${response_json} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867504370428673404416184534695938', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_json}</var>
<arg>${response.text}</arg>
<doc>Convert String to JSON object</doc>
<status status="PASS" start="2024-12-04T14:29:55.807570" elapsed="0.000545"/>
</kw>
<kw name="Convert To Dictionary" owner="Collections">
<msg time="2024-12-04T14:29:55.808682" level="INFO">${response_dictionary} = {'FailedRecordCount': 0, 'Records': [{'SequenceNumber': '49656202370868236242293867504370428673404416184534695938', 'ShardId': 'shardId-000000000000'}]}</msg>
<var>${response_dictionary}</var>
<arg>${response_json}</arg>
<doc>Converts the given ``item`` to a Python ``dict`` type.</doc>
<status status="PASS" start="2024-12-04T14:29:55.808682" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>FailedRecordCount</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:55.808682" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Numbers" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.809241" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${response_dictionary['FailedRecordCount']}</arg>
<arg>0</arg>
<arg>"'FailedRecordCount' should be 0"</arg>
<doc>Fails if objects are unequal after converting them to real numbers.</doc>
<status status="PASS" start="2024-12-04T14:29:55.808682" elapsed="0.000559"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${response_dictionary}</arg>
<arg>Records</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:55.809241" elapsed="0.000558"/>
</kw>
<kw name="Get From List" owner="Collections">
<msg time="2024-12-04T14:29:55.809799" level="INFO">${record} = {'SequenceNumber': '49656202370868236242293867504370428673404416184534695938', 'ShardId': 'shardId-000000000000'}</msg>
<var>${record}</var>
<arg>${response_dictionary['Records']}</arg>
<arg>0</arg>
<doc>Returns the value specified with an ``index`` from ``list``.</doc>
<status status="PASS" start="2024-12-04T14:29:55.809799" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>SequenceNumber</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:55.810409" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.811026" level="INFO">${sequence_number} = 49656202370868236242293867504370428673404416184534695938</msg>
<var>${sequence_number}</var>
<arg>${record['SequenceNumber']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:55.810409" elapsed="0.000617"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${sequence_number}</arg>
<arg>^\\d{56}$</arg>
<arg>"SequenceNumber should be a 56-digit number"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:55.811026" elapsed="0.000797"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.811823" level="INFO">${SEQUENCE_NUMBER} = 49656202370868236242293867504370428673404416184534695938</msg>
<arg>${SEQUENCE_NUMBER}</arg>
<arg>${sequence_number}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:55.811823" elapsed="0.000000"/>
</kw>
<kw name="Dictionary Should Contain Key" owner="Collections">
<arg>${record}</arg>
<arg>ShardId</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="PASS" start="2024-12-04T14:29:55.811823" elapsed="0.000574"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.812964" level="INFO">${shard_id} = shardId-000000000000</msg>
<var>${shard_id}</var>
<arg>${record['ShardId']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-12-04T14:29:55.812397" elapsed="0.000567"/>
</kw>
<kw name="Should Match Regexp" owner="BuiltIn">
<arg>${shard_id}</arg>
<arg>^shardId-\\d{12}$</arg>
<arg>"ShardId should match format 'shardId-&lt;12 digits&gt;'"</arg>
<doc>Fails if ``string`` does not match ``pattern`` as a regular expression.</doc>
<status status="PASS" start="2024-12-04T14:29:55.812964" elapsed="0.000572"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-12-04T14:29:55.813840" level="INFO">${SHARD_ID} = shardId-000000000000</msg>
<arg>${SHARD_ID}</arg>
<arg>${shard_id}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-12-04T14:29:55.813840" elapsed="0.000000"/>
</kw>
<arg>${KINESIS_LOG_UPLOAD_RESPONSE}</arg>
<status status="PASS" start="2024-12-04T14:29:55.807570" elapsed="0.006270"/>
</kw>
<arg>${KINESIS_HOST}</arg>
<arg>${LOG_UPLOAD_SIGNED_HEADERS}</arg>
<arg>${LOG_UPLOAD_PAYLOAD}</arg>
<arg>200</arg>
<status status="PASS" start="2024-12-04T14:29:54.423195" elapsed="1.390645"/>
</kw>
<kw name="Run Command" owner="keywords" type="TEARDOWN">
<kw name="Execute Command" owner="SSHLibrary">
<msg time="2024-12-04T14:29:55.814947" level="INFO">Executing command 'sudo tc qdisc del dev ens5 root'.</msg>
<msg time="2024-12-04T14:29:58.728609" level="INFO">Command exited with return code 0.</msg>
<msg time="2024-12-04T14:29:58.728609" level="INFO">${output} = </msg>
<var>${output}</var>
<arg>${command}</arg>
<doc>Executes ``command`` on the remote machine and returns its outputs.</doc>
<status status="PASS" start="2024-12-04T14:29:55.814947" elapsed="2.913662"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-12-04T14:29:58.728609" level="INFO">command executed. Output: </msg>
<arg>command executed. Output: ${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-12-04T14:29:58.728609" elapsed="0.000000"/>
</kw>
<arg>${RULE_CLEANED_UP_COMMAND}</arg>
<status status="PASS" start="2024-12-04T14:29:55.814947" elapsed="2.913662"/>
</kw>
<doc>This test case verifies that when there is a packet loss, the shard key api returns valid partition key and stream name, signed kinesis post api returns valid signed headers and log upload api successfully uploads logs to kinesis.</doc>
<tag>API</tag>
<tag>Regression</tag>
<tag>Sanity</tag>
<status status="PASS" start="2024-12-04T14:29:30.986073" elapsed="27.742536"/>
</test>
<status status="PASS" start="2024-12-04T14:28:28.004479" elapsed="90.724130"/>
</suite>
<statistics>
<total>
<stat pass="5" fail="0" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="5" fail="0" skip="0">API</stat>
<stat pass="5" fail="0" skip="0">Regression</stat>
<stat pass="5" fail="0" skip="0">Sanity</stat>
</tag>
<suite>
<stat pass="5" fail="0" skip="0" id="s1" name="bgAPITest">bgAPITest</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
